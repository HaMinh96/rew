import{s as x}from"./index-B4eUd1dG.js";import{s as V}from"./index-gL340Yxs.js";import{X as j,j as c,$ as k,l as S,c as p,u as f,F as q,b as a,a as r,h as B,w as P,T as D,o as v,E,W as N}from"./index-BgtT1W5B.js";import{u as T}from"./loading-C6gldQTS.js";import{c as _}from"./index-TYybhZOI.js";import{u as F}from"./usePowerCampus-DXENzAka.js";import"./index-Bh63qnmP.js";const R={class:"m-2 px-3 px-sm-0 editor",style:{"min-height":"90%"}},$={class:"d-flex justify-content-end gap-2 mt-2"},A={class:"position-absolute align-items-center justify-content-center top-50 start-50 translate-middle",style:{display:"flex"}},L=r("div",{class:"loading-indicator"},null,-1),M=[L],K={__name:"PowerCampus",setup(U){const{powerCampusContent:n,getPowerCampusContent:h,savePowerCampusContent:g}=F(),u=T(),m=j(),t=c(""),l=c(!1),C=async()=>{l.value=!0;const e=await g(t.value);l.value=!1,e!=null&&e.success&&(n.value=t.value)},w=()=>{_(m,{message:"Do you want to cancel?",accept:()=>{t.value=n.value}})},y=()=>{_(m,{message:"Do you want to save changes?",accept:C})},d=c();return k(d,e=>{e&&(e.renderValue=(function(o){if(this.quill)if(o){const s=this.quill.clipboard.convert({html:o});this.quill.setContents(s,"silent")}else this.quill.setText("")}).bind(e))}),S(async()=>{await h(),t.value=n.value}),(e,i)=>{const o=V,s=x;return v(),p("div",R,[f(u).loading?B("",!0):(v(),p(q,{key:0},[a(o,{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=b=>t.value=b),ref_key:"editorRef",ref:d,editorStyle:"height: calc(100vh - 110px)"},null,8,["modelValue"]),r("div",$,[a(s,{label:"Cancel",severity:"secondary",onClick:w}),a(s,{label:"Save",onClick:y,loading:l.value},null,8,["loading"])])],64)),a(D,null,{default:P(()=>[E(r("div",A,M,512),[[N,f(u).loading]])]),_:1})])}}};export{K as default};
