import{s as x}from"./index-DEvEhani.js";import{s as V}from"./index-CNN-ZGcq.js";import{W as k,i as c,Y as j,k as S,c as p,u as f,F as q,b as a,a as r,g as B,w as P,T as D,o as v,A as N,V as T}from"./index-C2t267js.js";import{u as A}from"./loading-CPdZ9CVe.js";import{c as _}from"./index-DIdd2rVb.js";import{u as E}from"./usePowerCampus-CDR6EA-2.js";import"./index-BZZyB39h.js";const F={class:"m-2 px-3 px-sm-0 editor",style:{"min-height":"90%"}},R={class:"d-flex justify-content-end gap-2 mt-2"},L={class:"position-absolute align-items-center justify-content-center top-50 start-50 translate-middle",style:{display:"flex"}},M=r("div",{class:"loading-indicator"},null,-1),U=[M],K={__name:"PowerCampus",setup(W){const{powerCampusContent:n,getPowerCampusContent:h,savePowerCampusContent:g}=E(),u=A(),m=k(),t=c(""),l=c(!1),C=async()=>{l.value=!0;const e=await g(t.value);l.value=!1,e!=null&&e.success&&(n.value=t.value)},w=()=>{_(m,{message:"Do you want to cancel?",accept:()=>{t.value=n.value}})},y=()=>{_(m,{message:"Do you want to save changes?",accept:C})},d=c();return j(d,e=>{e&&(e.renderValue=(function(o){if(this.quill)if(o){const s=this.quill.clipboard.convert({html:o});this.quill.setContents(s,"silent")}else this.quill.setText("")}).bind(e))}),S(async()=>{await h(),t.value=n.value}),(e,i)=>{const o=V,s=x;return v(),p("div",F,[f(u).loading?B("",!0):(v(),p(q,{key:0},[a(o,{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=b=>t.value=b),ref_key:"editorRef",ref:d,editorStyle:"height: calc(100vh - 110px)"},null,8,["modelValue"]),r("div",R,[a(s,{label:"Cancel",severity:"secondary",onClick:w}),a(s,{label:"Save",onClick:y,loading:l.value},null,8,["loading"])])],64)),a(D,null,{default:P(()=>[N(r("div",L,U,512),[[T,f(u).loading]])]),_:1})])}}};export{K as default};
